# workflow
# mainë¸Œëœì¹˜ì— ì»¤ë°‹ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤.
name: Unit-Tests

on: # ì´ë²¤íŠ¸ ê°ì§€
  push:
    branch: [main] # main ë¸Œëœì¹˜ì—ì„œ ì‹¤í–‰

jobs: # ì‘ì—…ë“¤
  Server-Unit-Tests:
    name: Unit tests
    runs-on: [ubuntu-latest] # ìš°ë¶„íˆ¬ ê°€ìƒí™˜ê²½
    strategy:
      matrix:
        node-version: [14.x] # node ë²„ì „ ì„¤ì •
    steps:
      - name: Check out repo code
        uses: actions/checkout@v2
      - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
      - name: Set up node with ${{ matrix.node-version }}
        uses: actions/setup-node@v2
        with:
          node-version: ${{ matrix.node-version }}
          cache: "yarn"
          cache-dependency-path: |
            server/yarn.lock
      - name: Install dependencies
        run: |
          cd server
          yarn install
      - name: Run tests
        run: |
          cd server
          yarn test
      - name: If fail
        run: exit 1
        if: failure()
      - name: Job's status
        run: echo "ğŸŸ¢ This job's status is ${{ job.status }}"
